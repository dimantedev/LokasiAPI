<!DOCTYPE html>
<html>
<head>
  <title>📍 Pelacak Lokasi Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; padding:2rem;">
  <h1>📍 Lokasi Anda</h1>
  <p id="info">Mengambil lokasi...</p>

  <script>
    // 🔁 Ganti dengan konfigurasi Firebase milik kamu
    const firebaseConfig = {
  apiKey: "AIzaSyAnI3-EDQr7OK8fHaeSSzAtLk9iR5sgbac",
  authDomain: "lokasiapi-2f434.firebaseapp.com",
  projectId: "lokasiapi-2f434",
  storageBucket: "lokasiapi-2f434.firebasestorage.app",
  messagingSenderId: "875812427660",
  appId: "1:875812427660:web:5c4ce962244c47e18128a9"
};

    // Inisialisasi Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const infoEl = document.getElementById('info');

    function sendLocation(lat, lon) {
      const now = new Date().toISOString();
      db.ref("lokasi").push({
        latitude: lat,
        longitude: lon,
        timestamp: now
      }).then(() => {
        infoEl.innerText = `✅ Lokasi berhasil dikirim:\nLat: ${lat}, Lon: ${lon}`;
      }).catch(err => {
        infoEl.innerText = "❌ Gagal kirim lokasi: " + err.message;
      });
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude.toFixed(6);
        const lon = pos.coords.longitude.toFixed(6);
        sendLocation(lat, lon);
      }, err => {
        infoEl.innerText = "❌ Gagal dapat lokasi: " + err.message;
      }, {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      });
    } else {
      infoEl.innerText = "Browser tidak mendukung Geolocation.";
    }
  </script>
</body>
</html>
