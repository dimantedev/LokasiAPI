<!DOCTYPE html>
<html>
<head>
  <title>📍 Pelacak Lokasi Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js"></script>
</head>
<body style="font-family:sans-serif; text-align:center; padding:2rem;">
  <h1>📍 Lokasi Anda</h1>
  <p id="info">Mengambil lokasi...</p>

  <script>
    // 🔁 Ganti dengan konfigurasi Firebase milik kamu
    const firebaseConfig = {
      apiKey: "API_KEY_KAMU",
      authDomain: "PROJECT_ID.firebaseapp.com",
      databaseURL: "https://PROJECT_ID.firebaseio.com",
      projectId: "PROJECT_ID",
      storageBucket: "PROJECT_ID.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };

    // Inisialisasi Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const infoEl = document.getElementById('info');

    function sendLocation(lat, lon) {
      const now = new Date().toISOString();
      db.ref("lokasi").push({
        latitude: lat,
        longitude: lon,
        timestamp: now
      }).then(() => {
        infoEl.innerText = `✅ Lokasi berhasil dikirim:\nLat: ${lat}, Lon: ${lon}`;
      }).catch(err => {
        infoEl.innerText = "❌ Gagal kirim lokasi: " + err.message;
      });
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude.toFixed(6);
        const lon = pos.coords.longitude.toFixed(6);
        sendLocation(lat, lon);
      }, err => {
        infoEl.innerText = "❌ Gagal dapat lokasi: " + err.message;
      }, {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      });
    } else {
      infoEl.innerText = "Browser tidak mendukung Geolocation.";
    }
  </script>
</body>
</html>
